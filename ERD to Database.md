# Transforming ERD to Database

![image](https://github.com/toarnabtrainer/PTS_Databases/assets/111301975/bed1eaaf-b549-4f12-a092-6270f8657b1e)

<hr> 

<b>

<pre>
-- creating all database tables
-- create table for country
-- table creation for 'country'
CREATE TABLE country (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY,
  country_name VARCHAR2(128),
  country_name_eng VARCHAR2(128),
  country_code CHAR(8),
  CONSTRAINT country_pk PRIMARY KEY (id)
);

-- table creation for 'city'
CREATE TABLE city (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY,
  city_name VARCHAR2(128),
  latitude NUMBER(9,6),
  longitude NUMBER(9,6),
  country_id NUMBER,
  CONSTRAINT city_pk PRIMARY KEY (id)
);

-- table creation for 'employee'
CREATE TABLE employee (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY,
  first_name VARCHAR2(255),
  last_name VARCHAR2(255),
  CONSTRAINT employee_pk PRIMARY KEY (id)
);

-- table creation for 'customer'
CREATE TABLE customer (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY,
  customer_name VARCHAR2(255),
  city_id NUMBER,
  customer_address VARCHAR2(255),
  next_call_date DATE,
  ts_inserted TIMESTAMP,
  CONSTRAINT customer_pk PRIMARY KEY (id)
);

-- table creation for 'call_table'
CREATE TABLE call_table (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY,
  employee_id NUMBER,
  customer_id NUMBER,
  start_time TIMESTAMP,
  end_time TIMESTAMP,
  call_outcome_id NUMBER,
  CONSTRAINT call_table_pk PRIMARY KEY (id)
);

-- table creation for 'call_outcome'
CREATE TABLE call_outcome (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY,
  outcome_text VARCHAR2(128),
  CONSTRAINT call_outcome_pk PRIMARY KEY (id)
);

-- Add country_id as foreign key in city table
ALTER TABLE city 
ADD CONSTRAINT city_country_fk
FOREIGN KEY (country_id) 
REFERENCES country(id);

-- Add call_outcome_id as foreign key in call_table
ALTER TABLE call_table
ADD CONSTRAINT call_table_call_outcome_fk
FOREIGN KEY (call_outcome_id)
REFERENCES call_outcome(id);

-- Add customer_id as foreign key in call_table
ALTER TABLE call_table
ADD CONSTRAINT call_table_customer_fk
FOREIGN KEY (customer_id)
REFERENCES customer(id);

-- Add employee_id as foreign key in call_table
ALTER TABLE call_table
ADD CONSTRAINT call_table_employee_fk
FOREIGN KEY (employee_id)
REFERENCES employee(id);

-- Add city_id as foreign key in customer
ALTER TABLE customer
ADD CONSTRAINT customer_city_fk
FOREIGN KEY (city_id)
REFERENCES city(id);

-- Insert into country
INSERT INTO country (country_name, country_name_eng, country_code) VALUES ('Deutschland', 'Germany', 'DEU');
INSERT INTO country (country_name, country_name_eng, country_code) VALUES ('Srbija', 'Serbia', 'SRB');
INSERT INTO country (country_name, country_name_eng, country_code) VALUES ('Hrvatska', 'Croatia', 'HRV');
INSERT INTO country (country_name, country_name_eng, country_code) VALUES ('United Stated of America', 'United Stated of America', 'USA');
INSERT INTO country (country_name, country_name_eng, country_code) VALUES ('Polska', 'Poland', 'POL');
SELECT * FROM country;
DESCRIBE country;

-- Insert into city
INSERT INTO city (city_name, latitude, longitude, country_id) VALUES ('Berlin', 52.520008, 13.404954, 1);
INSERT INTO city (city_name, latitude, longitude, country_id) VALUES ('Belgrade', 44.787197, 20.457273, 2);
INSERT INTO city (city_name, latitude, longitude, country_id) VALUES ('Zagreb', 45.815399, 15.966568, 3);
INSERT INTO city (city_name, latitude, longitude, country_id) VALUES ('New York', 40.73061, -73.935242, 4);
INSERT INTO city (city_name, latitude, longitude, country_id) VALUES ('Los Angeles', 34.052235, -118.243683, 4);
INSERT INTO city (city_name, latitude, longitude, country_id) VALUES ('Warsaw', 52.237049, 21.017532, 5);
SELECT * FROM city;
DESCRIBE city;

-- Insert into call_outcome
INSERT INTO call_outcome (outcome_text) VALUES ('call started');
INSERT INTO call_outcome (outcome_text) VALUES ('finished - successfully');
INSERT INTO call_outcome (outcome_text) VALUES ('finished - unsuccessfully');
SELECT * FROM call_outcome;
DESCRIBE call_outcome;
	
-- Insert into employee
INSERT INTO employee (first_name, last_name)
VALUES ('Thomas (Neo)', 'Anderson');
INSERT INTO employee (first_name, last_name)
VALUES ('Agent', 'Smith');
SELECT * FROM employee;
DESCRIBE employee;

-- Insert into customer
INSERT INTO customer (customer_name, city_id, customer_address, next_call_date, ts_inserted) VALUES ('Jewelry Store', 4, 'Long Street 120', TO_DATE('2020-01-21', 'YYYY-MM-DD'), TO_TIMESTAMP('2020-01-09 14:01:20', 'YYYY-MM-DD HH24:MI:SS'));
INSERT INTO customer (customer_name, city_id, customer_address, next_call_date, ts_inserted) VALUES ('Bakery', 1, 'Kurfürstendamm 25', TO_DATE('2020-02-21', 'YYYY-MM-DD'), TO_TIMESTAMP('2020-01-09 17:52:15', 'YYYY-MM-DD HH24:MI:SS'));
INSERT INTO customer (customer_name, city_id, customer_address, next_call_date, ts_inserted) VALUES ('Café', 1, 'Tauentzienstraße 44', TO_DATE('2020-01-21', 'YYYY-MM-DD'), TO_TIMESTAMP('2020-01-10 08:02:49', 'YYYY-MM-DD HH24:MI:SS'));
INSERT INTO customer (customer_name, city_id, customer_address, next_call_date, ts_inserted) VALUES ('Restaurant', 3, 'Ulica lipa 15', TO_DATE('2020-01-21', 'YYYY-MM-DD'), TO_TIMESTAMP('2020-01-10 09:20:21', 'YYYY-MM-DD HH24:MI:SS'));
SELECT * FROM customer;
DESCRIBE customer;

-- Insert into call_table
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (1, 4, TO_TIMESTAMP('2020-01-11 09:00:15', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:12:22', 'YYYY-MM-DD HH24:MI:SS'), 2);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (1, 2, TO_TIMESTAMP('2020-01-11 09:14:50', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:20:01', 'YYYY-MM-DD HH24:MI:SS'), 2);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (2, 3, TO_TIMESTAMP('2020-01-11 09:02:20', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:18:05', 'YYYY-MM-DD HH24:MI:SS'), 3);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (1, 1, TO_TIMESTAMP('2020-01-11 09:24:15', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:25:05', 'YYYY-MM-DD HH24:MI:SS'), 3);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (1, 3, TO_TIMESTAMP('2020-01-11 09:26:23', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:33:45', 'YYYY-MM-DD HH24:MI:SS'), 2);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (1, 2, TO_TIMESTAMP('2020-01-11 09:40:31', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:42:32', 'YYYY-MM-DD HH24:MI:SS'), 2);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (2, 4, TO_TIMESTAMP('2020-01-11 09:41:17', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:45:21', 'YYYY-MM-DD HH24:MI:SS'), 2);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (1, 1, TO_TIMESTAMP('2020-01-11 09:42:32', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:46:53', 'YYYY-MM-DD HH24:MI:SS'), 3);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (2, 1, TO_TIMESTAMP('2020-01-11 09:46:00', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:48:02', 'YYYY-MM-DD HH24:MI:SS'), 2);
INSERT INTO call_table (employee_id, customer_id, start_time, end_time, call_outcome_id) VALUES (2, 2, TO_TIMESTAMP('2020-01-11 09:50:12', 'YYYY-MM-DD HH24:MI:SS'), TO_TIMESTAMP('2020-01-11 09:55:35', 'YYYY-MM-DD HH24:MI:SS'), 2);
SELECT * FROM call_table;
DESCRIBE call_table;

-- display records
SELECT * FROM call_table;
SELECT * FROM call_outcome;
SELECT * FROM customer;
SELECT * FROM employee;
SELECT * FROM city;
SELECT * FROM country;

-- drop all foreig key constraints
ALTER TABLE city DROP CONSTRAINT city_country_fk;
ALTER TABLE call_table DROP CONSTRAINT call_table_call_outcome_fk;
ALTER TABLE call_table DROP CONSTRAINT call_table_customer_fk;
ALTER TABLE call_table DROP CONSTRAINT call_table_employee_fk;
ALTER TABLE customer DROP CONSTRAINT customer_city_fk;

-- drop all databse tables
DROP TABLE call_table;
DROP TABLE call_outcome;
DROP TABLE customer;
DROP TABLE employee;
DROP TABLE city;
DROP TABLE country;

</pre>

</b>

<hr>
